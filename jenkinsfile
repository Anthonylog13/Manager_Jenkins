pipeline {
    agent any // Tu agente Windows

    stages {
        stage('Test PowerShell Súper Básico') {
            steps {
                echo "Paso 1: Intentando 'Write-Host Hello'"
                // Usamos triple comilla simple para evitar problemas con Groovy y $
                powershell '''Write-Host "Hello from Jenkins PowerShell step"'''
                echo "Paso 1: Comando 'Write-Host' supuestamente completado."

                echo "Paso 2: Intentando 'Get-Location'"
                powershell "Get-Location"
                echo "Paso 2: Comando 'Get-Location' supuestamente completado."
            }
        }
    }
    post {
        always {
            echo "Pipeline de diagnóstico PowerShell finalizado."
        }
    }
}